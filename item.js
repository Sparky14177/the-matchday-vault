import { initGallery } from './gallery.js';(async function(){const id=new URLSearchParams(location.search).get('id');let data=[];try{data=await (await fetch('assets/data/items.json')).json();}catch(e){}const item=data.find(x=>x.id===id)||data[0];if(!item){document.getElementById('item-title').textContent='Item not found';return;}document.title=item.title+' — The Matchday Vault';document.getElementById('item-title').textContent=item.title;document.getElementById('item-subtitle').textContent=[item.player,item.team,item.year].filter(Boolean).join(' · ');const m=document.getElementById('item-meta');function row(k,v){if(!v)return;m.insertAdjacentHTML('beforeend',`<dt>${k}</dt><dd>${v}</dd>`);}row('Player',item.player);row('Team',item.team);row('Year',item.year);row('Competition',item.competition);row('Match',item.match);row('Notes',item.notes);const slides=(item.photos||[]).map(p=>`<div class='carousel__slide'><img src='${p.src}' alt='${p.alt||''}'></div>`).join('');document.getElementById('gallery').innerHTML=`<div class="carousel"><button id="prevBtn" class="carousel__btn carousel__btn--prev">‹</button><div class="carousel__viewport"><div class="carousel__track" id="track">${slides}</div></div><button id="nextBtn" class="carousel__btn carousel__btn--next">›</button><div class="carousel__dots" id="dots">${(item.photos||[]).map((_,i)=>`<button class='carousel__dot' data-idx='${i}' aria-current='${i==0}'></button>`).join('')}</div></div>`;initGallery(document);if(item.video){const vc=document.getElementById('video-container');if(item.video.includes('drive.google.com')){const ifr=document.createElement('iframe');ifr.src=item.video;ifr.width='100%';ifr.height='360';ifr.loading='lazy';ifr.allow='autoplay; fullscreen';vc.appendChild(ifr);} }})();